<% layout('layouts/boilerPlate') %>
<%# This EJS file renders the portfolio page, showcasing various projects and providing filtering options. %>
 
<article class="portfolio active" data-page="portfolio">

  <header>
    <h2 class="h2 article-title">Portfolio</h2>
    <a href="/contact" class="form-btn" style="margin-top:8px;">
      <ion-icon name="chatbubbles-outline"></ion-icon>
      <span>Contact Me</span>
    </a>
  </header>

  <section class="projects">

    <%# Filter buttons for project categories %>
    <ul class="filter-list">
      <li class="filter-item">
        <button class="active" data-filter-btn>All</button>
      </li>
      <% categories.forEach(function(category) { %>
      <li class="filter-item">
        <button data-filter-btn><%= category %></button>
      </li>
      <% }); %>
    </ul>

    <%# Custom select dropdown for filtering on smaller screens %>
    <div class="filter-select-box">
      <button class="filter-select" data-select>
        <div class="select-value" data-selecct-value>Select category</div>
        <div class="select-icon">
          <ion-icon name="chevron-down"></ion-icon>
        </div>
      </button>
      <ul class="select-list">
        <li class="select-item">
          <button data-select-item>All</button>
        </li>
        <% categories.forEach(function(category) { %>
        <li class="select-item">
          <button data-select-item><%= category %></button>
        </li>
        <% }); %>
      </ul>
    </div>
    
    <%# List of projects %>
    <ul class="project-list">
      <% projects.forEach(function(project) { %>
      <li class="project-item active" data-filter-item data-category="<%= project.category.toLowerCase() %>" data-project-item>
        <a href="<%= project.link %>">
          <figure class="project-img">
            <div class="project-item-icon-box">
              <ion-icon name="eye-outline"></ion-icon>
            </div>
            <img src="<%= project.image.url %>" alt="<%= project.title %>" loading="lazy" decoding="async" sizes="(max-width: 700px) 100vw, (max-width: 1024px) 50vw, 33vw">
          </figure>
          <h3 class="project-title"><%= project.title %></h3>
          <p class="project-category"><%= project.category %></p>
        </a>
        <div style="display:none;">
          <div data-project-title><%= project.title %></div>
          <div data-project-category><%= project.category %></div>
          <div data-project-image><%= project.image && project.image.url ? project.image.url : '' %></div>
          <div data-project-description><%= project.description %></div>
          <div data-project-context><%= project.context || '' %></div>
          <div data-project-role><%= project.role || '' %></div>
          <div data-project-approach><%= project.approach || '' %></div>
          <div data-project-outcome><%= project.outcome || '' %></div>
          <div data-project-technologies><%= Array.isArray(project.technologies) ? project.technologies.join(', ') : '' %></div>
          <div data-project-strengths><%= Array.isArray(project.strengths) ? project.strengths.join(', ') : '' %></div>
          <div data-project-link><%= project.link %></div>
        </div>
      </li>
      <% }); %>
    </ul>

  </section>

</article>
